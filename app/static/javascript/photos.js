// Generated by CoffeeScript 1.8.0
(function() {
  var Page, d, getPhotos, handleResults;

  getPhotos = function() {
    return $.ajax({
      url: 'get_photos',
      beforeSend: function() {
        return console.log("before send");
      },
      success: handleResults
    });
  };

  handleResults = function(response) {
    var item, _i, _len, _ref;
    kvStore.set("photos", response.data);
    _ref = response.data;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      item = _ref[_i];
      $('body').append("<p>" + item.path + "</p>");
    }
    return console.log(kvStore.get("photos")[0]);
  };

  d = React.DOM;

  Page = React.createClass({
    getInitialState: function() {
      return {
        loading: true,
        thumbnail: null
      };
    },
    componentDidMount: function() {
      this.setState({
        loading: false
      });
      return this.getThumbnail("path");
    },
    getThumbnail: function(path) {
      console.log("getting thumb");
      return $.ajax({
        url: 'thumbnail',
        data: {
          path: "Pictures/Picture a Day/2013-05-30.jpg"
        },
        success: (function(_this) {
          return function(response) {
            if (_this.isMounted()) {
              return _this.setState({
                thumbnail: response
              });
            }
          };
        })(this)
      });
    },
    render: function() {
      console.log("hi");
      console.log(this.state);
      return d.div({}, "hello world");
    }
  });

  $(function() {
    return React.render(Page({}), document.getElementById('react'));
  });

}).call(this);
